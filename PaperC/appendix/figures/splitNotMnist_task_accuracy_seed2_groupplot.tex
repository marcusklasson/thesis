

%\renewcommand\thesubfigure{(\alph{subfigure})}
\pgfplotsset{every axis title/.append style={at={(0.5,0.90)}}}
\begin{tikzpicture}

\definecolor{color0}{rgb}{0.12156862745098,0.466666666666667,0.705882352941177}
\definecolor{color1}{rgb}{1,0.498039215686275,0.0549019607843137}
\definecolor{color2}{rgb}{0.172549019607843,0.627450980392157,0.172549019607843}
\definecolor{color3}{rgb}{0.83921568627451,0.152941176470588,0.156862745098039}
\definecolor{color4}{rgb}{0.580392156862745,0.403921568627451,0.741176470588235}

\begin{groupplot}[group style={group size= 3 by 1, horizontal sep=2cm, vertical sep=2cm, group name=Task_group}, ]

\nextgroupplot[title={Fine-tuning ($M=0$)},
height=\figheight,
    legend cell align={left},
    legend style={
      fill opacity=0.8,
      draw opacity=1,
      text opacity=1,
      at={(0.03,0.03)},
      anchor=south west,
      draw=white!80!black
    },
minor xtick={},
minor ytick={0.65, 0.75, 0.85, 0.95, 1.05},
tick align=outside,
tick pos=left,
width=\figwidth,
x grid style={white!69.0196078431373!black},
xlabel={Task Number},
xmajorgrids,
xmin=0.8, xmax=5.2,
xtick style={color=black},
xtick={1,2,3,4,5},
y grid style={white!69.0196078431373!black},
ylabel={Accuracy},
ymajorgrids,
yminorgrids,
ymin=0.7, ymax=1.01,
ytick style={color=black},
ytick={0.7, 0.8, 0.9, 1.0, 1.1},
yticklabels={0.7, 0.8, 0.9, 1.0, 1.1}
]
\addplot [line width=1.5pt, color0, mark=*, mark size=1.5, mark options={solid}]
table {%
1 0.962406039237976
2 0.962406039237976
3 0.74436092376709
4 0.827067673206329
5 0.774436116218567
};\label{plots:Task1}
\addplot [line width=1.5pt, color1, mark=*, mark size=1.5, mark options={solid}]
table {%
2 0.990196049213409
3 0.892156839370728
4 0.872548997402191
5 0.921568632125854
};\label{plots:Task2}
\addplot [line width=1.5pt, color2, mark=*, mark size=1.5, mark options={solid}]
table {%
3 0.977777779102325
4 0.855555534362793
5 0.766666650772095
};\label{plots:Task3}
\addplot [line width=1.5pt, color3, mark=*, mark size=1.5, mark options={solid}]
table {%
4 0.985294103622437
5 0.941176474094391
};\label{plots:Task4}
\addplot [line width=1.5pt, color4, mark=*, mark size=1.5, mark options={solid}]
table {%
5 0.954545438289642
};\label{plots:Task5}

\nextgroupplot[title={ETS ($M = 24$)},
height=\figheight,
legend cell align={left},
legend style={
  fill opacity=0.8,
  draw opacity=1,
  text opacity=1,
  at={(0.03,0.03)},
  anchor=south west,
  draw=white!80!black
},
minor xtick={},
minor ytick={0.65, 0.75, 0.85, 0.95, 1.05},
tick align=outside,
tick pos=left,
width=\figwidth,
x grid style={white!69.0196078431373!black},
xlabel={Task Number},
xmajorgrids,
xmin=0.8, xmax=5.2,
xtick style={color=black},
xtick={1,2,3,4,5},
y grid style={white!69.0196078431373!black},
ylabel={Accuracy},
ymajorgrids,
yminorgrids,
ymin=0.7, ymax=1.01,
ytick style={color=black},
ytick={0.7, 0.8, 0.9, 1.0, 1.1},
yticklabels={0.7, 0.8, 0.9, 1.0, 1.1}
]
\addplot [line width=1.5pt, color0, mark=*, mark size=1.5, mark options={solid}]
table {%
1 0.962406039237976
2 0.947368443012238
3 0.924812018871307
4 0.947368443012238
5 0.887218058109283
};
\addplot [line width=1.5pt, color1, mark=*, mark size=1.5, mark options={solid}]
table {%
2 0.990196049213409
3 0.911764681339264
4 0.921568632125854
5 0.921568632125854
};
\addplot [line width=1.5pt, color2, mark=*, mark size=1.5, mark options={solid}]
table {%
3 0.98888885974884
4 0.977777779102325
5 0.977777779102325
};
\addplot [line width=1.5pt, color3, mark=*, mark size=1.5, mark options={solid}]
table {%
4 0.970588207244873
5 0.970588207244873
};
\addplot [line width=1.5pt, color4, mark=*, mark size=1.5, mark options={solid}]
table {%
5 0.954545438289642
};
%\addlegendentry{RS-MCTS}

\nextgroupplot[title={RS-MCTS ($M = 24$)},
height=\figheight,
legend cell align={left},
legend style={
  fill opacity=0.8,
  draw opacity=1,
  text opacity=1,
  at={(0.03,0.03)},
  anchor=south west,
  draw=white!80!black
},
minor xtick={},
minor ytick={0.65, 0.75, 0.85, 0.95, 1.05},
tick align=outside,
tick pos=left,
width=\figwidth,
x grid style={white!69.0196078431373!black},
xlabel={Task Number},
xmajorgrids,
xmin=0.8, xmax=5.2,
xtick style={color=black},
xtick={1,2,3,4,5},
y grid style={white!69.0196078431373!black},
ylabel={Accuracy},
ymajorgrids,
yminorgrids,
ymin=0.7, ymax=1.01,
ytick style={color=black},
ytick={0.7, 0.8, 0.9, 1.0, 1.1},
yticklabels={0.7, 0.8, 0.9, 1.0, 1.1}
]
\addplot [line width=1.5pt, color0, mark=*, mark size=1.5, mark options={solid}]
table {%
1 0.954887211322784
2 0.969924807548523
3 0.954887211322784
4 0.969924807548523
5 0.954887211322784
};
\addplot [line width=1.5pt, color1, mark=*, mark size=1.5, mark options={solid}]
table {%
2 0.990196049213409
3 0.970588207244873
4 0.980392158031464
5 0.980392158031464
};
\addplot [line width=1.5pt, color2, mark=*, mark size=1.5, mark options={solid}]
table {%
3 0.98888885974884
4 0.944444417953491
5 0.966666638851166
};
\addplot [line width=1.5pt, color3, mark=*, mark size=1.5, mark options={solid}]
table {%
4 0.941176474094391
5 0.985294103622437
};
\addplot [line width=1.5pt, color4, mark=*, mark size=1.5, mark options={solid}]
table {%
5 0.939393937587738
};
%\addlegendentry{RS-MCTS}

\end{groupplot}

\path (Task_group c1r1.north west|-current bounding box.north)--
      coordinate(legendpos)
      (Task_group c3r1.north east|-current bounding box.north);
\matrix[
    matrix of nodes,
    anchor=south,
    draw,
    inner sep=0.2em,
    draw
  ]at([yshift=1ex]legendpos)
  {
    \ref{plots:Task1}& Task 1&[5pt]
    \ref{plots:Task2}& Task 2&[5pt]
    \ref{plots:Task3}& Task 3&[5pt]
    \ref{plots:Task4}& Task 4&[5pt]
    \ref{plots:Task5}& Task 5&[5pt]\\};

\end{tikzpicture} 
